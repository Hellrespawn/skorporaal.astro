---
import { type Frontmatter, FullPost } from "@s:post";

import PostLayout from "@l:PostLayout.astro";

const { post } = Astro.props as { post: FullPost };

export async function getStaticPaths() {
  const instances = await Astro.glob<Frontmatter>("../../content/**/*.md");

  const posts = instances.map((instance) => new FullPost(instance));

  return posts.map((post) => {
    return {
      params: {
        category: post.category,
        slug: post.slug,
      },
      props: { post },
    };
  });
}
---

<PostLayout post={post} />
